(function(t){function e(e){for(var s,i,c=e[0],r=e[1],u=e[2],l=0,h=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(h.length)h.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,i=1;i<n.length;i++){var c=n[i];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},i={app:0},o={app:0},a=[];function c(t){return r.p+"js/"+({}[t]||t)+"."+{"chunk-1250cd8c":"897ea0ed","chunk-16b6ee77":"eac6df01","chunk-17f22a8b":"3820a7ba","chunk-24b14c40":"a766e8d0","chunk-5e22a194":"8e201c02","chunk-5e48472c":"bb2c64c0","chunk-5f4c0582":"bfb2b420","chunk-629e4e4b":"edbbf56a","chunk-2d0deb4c":"59dfb82b","chunk-3942e987":"420039a5","chunk-4109210f":"b14fa894","chunk-4c69919c":"f98fb73e","chunk-682c54a2":"1a16e90a"}[t]+".js"}function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n={"chunk-1250cd8c":1,"chunk-16b6ee77":1,"chunk-17f22a8b":1,"chunk-5e22a194":1,"chunk-5e48472c":1,"chunk-5f4c0582":1,"chunk-629e4e4b":1,"chunk-3942e987":1,"chunk-4109210f":1,"chunk-4c69919c":1,"chunk-682c54a2":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var s="css/"+({}[t]||t)+"."+{"chunk-1250cd8c":"1e774b37","chunk-16b6ee77":"32f84bec","chunk-17f22a8b":"0d9bae49","chunk-24b14c40":"31d6cfe0","chunk-5e22a194":"e2c4f7ff","chunk-5e48472c":"94133dec","chunk-5f4c0582":"de8bf758","chunk-629e4e4b":"d30659e9","chunk-2d0deb4c":"31d6cfe0","chunk-3942e987":"d39665ee","chunk-4109210f":"1a3087f0","chunk-4c69919c":"9a33a402","chunk-682c54a2":"8ec937b9"}[t]+".css",o=r.p+s,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var u=a[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===s||l===o))return e()}var h=document.getElementsByTagName("style");for(c=0;c<h.length;c++){u=h[c],l=u.getAttribute("data-href");if(l===s||l===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var s=e&&e.target&&e.target.src||o,a=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=s,delete i[t],d.parentNode.removeChild(d),n(a)},d.href=o;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){i[t]=0})));var s=o[t];if(0!==s)if(s)e.push(s[2]);else{var a=new Promise((function(e,n){s=o[t]=[e,n]}));e.push(s[2]=a);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=c(t);var h=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=o[t];if(0!==n){if(n){var s=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;h.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",h.name="ChunkLoadError",h.type=s,h.request=i,n[1](h)}o[t]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var h=0;h<u.length;h++)e(u[h]);var d=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"00e6":function(t,e,n){t.exports=n.p+"img/player_bar.3b9b552f.png"},"024c":function(t,e,n){"use strict";n("7f5c")},"034f":function(t,e,n){"use strict";n("85ec")},"2b33":function(t,e,n){"use strict";n("3a72")},"2fea":function(t,e,n){},"35f6":function(t,e,n){"use strict";n("cdd6")},"3a72":function(t,e,n){},4360:function(t,e,n){"use strict";var s=n("2b0e"),i=n("2f62"),o=n("b85c"),a=(n("caad"),n("a434"),{changeMusicUrl:function(t,e){t.globalMusicUrl=e},changeMusicInfo:function(t,e){t.globalMusicInfo=e},changeCurrentTime:function(t,e){t.globalCurrentTime=e},changeMusicStatus:function(t,e){t.isMusicPaused=e},changeMusicQueue:function(t,e){var n,s=[],i=Object(o["a"])(t.musicQueue);try{for(i.s();!(n=i.n()).done;){var a=n.value;s.push(a.id)}}catch(c){i.e(c)}finally{i.f()}s.includes(e.id)||t.musicQueue.push(e)},deleteMusic:function(t,e){for(var n=t.musicQueue,s=0;s<n.length;s++)n[s].id===e&&n.splice(s,1)},clearMusicQueue:function(t){t.musicQueue=[]},changeNowIndex:function(t,e){t.nowIndex=e},deleteToNext:function(t){t.deleteToNext=!t.deleteToNext},changeQueuePos:function(t,e){t.queuePos=e},changeQueueStyle:function(t,e){t.queueStyle=e}}),c=a;s["default"].use(i["a"]);var r=new i["a"].Store({state:{globalMusicUrl:"",globalMusicInfo:{},globalCurrentTime:0,isMusicPaused:!0,musicQueue:[],nowIndex:0,deleteToNext:!1,queuePos:{},queueStyle:"normal",isLogin:!1,uid:"",token:"",userImg:"https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",baseURL:"",showBotton:!1},mutations:c});e["a"]=r},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Top"),n("Index",[n("keep-alive",[this.$route.meta.keepAlive?n("router-view"):t._e()],1),this.$route.meta.keepAlive?t._e():n("router-view")],1),n("SongDetail",{attrs:{show:t.show}}),n("transition",{attrs:{name:"fade"}},[n("Queue",{directives:[{name:"show",rawName:"v-show",value:t.showQueue,expression:"showQueue"}]})],1),n("Bottom")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("h2",{staticStyle:{color:"white"}},[t._v("music-player")]),n("div",{staticClass:"btns"},[n("i",{staticClass:"el-icon-arrow-left",on:{click:function(e){return t.go(-1)}}}),n("i",{staticClass:"el-icon-arrow-right",on:{click:function(e){return t.go(1)}}})]),n("div",{staticClass:"input-box"},[n("el-input",{attrs:{placeholder:"搜索","prefix-icon":"el-icon-search",clearable:""},on:{focus:t.getSearchHot,blur:function(e){t.showHot=!1}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1),n("router-link",{attrs:{to:"/login"}}),n("el-dropdown",{staticClass:"avatar",attrs:{trigger:"click"},on:{command:t.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[n("el-avatar",{staticClass:"avatar",staticStyle:{top:"-30px",right:"0"},attrs:{size:40,src:t.$store.state.userImg}})],1),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[!0===t.$store.state.isLogin?n("el-dropdown-item",{attrs:{command:"a"}},[t._v("个人主页")]):t._e(),!0===t.$store.state.isLogin?n("el-dropdown-item",{attrs:{command:"b"}},[t._v("退出登录")]):t._e(),1!=t.$store.state.isLogin?n("el-dropdown-item",{attrs:{command:"c"}},[t._v("去登录")]):t._e()],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showHot,expression:"showHot"}],ref:"hot",staticClass:"search-hot",on:{mousedown:function(e){return e.stopPropagation(),t.prevent.apply(null,arguments)}}},[n("span",{staticClass:"hot-title",staticStyle:{display:"inline-block","margin-right":"5px"}},[t._v("搜索历史")]),n("span",{staticClass:"iconfont icon-lajitong",staticStyle:{cursor:"pointer"},attrs:{title:"清空搜索历史"},on:{mousedown:function(e){return t.deleteHistory(0,!0)}}}),n("el-scrollbar",{staticStyle:{height:"100%"}},[t.history.length?n("div",{staticClass:"history"},[n("div",{staticClass:"history-wrap"},t._l(t.history,(function(e,s){return n("div",{key:s,staticClass:"history-item",on:{mousedown:function(n){return t.toHot(e)}}},[t._v(" "+t._s(e)+" "),n("span",{staticClass:"delete-btn",attrs:{title:"删除"},on:{mousedown:function(e){return e.stopPropagation(),t.deleteHistory(s,!1)}}},[t._v("×")])])})),0)]):t._e()])],1)],1)},c=[],r=(n("caad"),n("2532"),n("4d63"),n("ac1f"),n("25f0"),n("841c"),n("a434"),{data:function(){return{searchValue:"",showHot:!1,hotData:[],history:[]}},methods:{handleCommand:function(t){"false"===localStorage.isLogin&&this.$message({type:"info",message:"请先登录"}),"a"===t?this.$router.push("/user"):"b"===t?(localStorage.isLogin="false",localStorage.token="",this.$store.state.isLogin=!1,this.$store.state.userImg="https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",this.$router.push("/"),this.$message({showClose:!0,message:"登出成功",type:"success"})):this.$router.push("/login")},search:function(){this.isNull(this.searchValue)?this.showError():(this.$router.push({path:"/result?keywords=".concat(this.searchValue)}),this.history.includes(this.searchValue)||this.history.push(this.searchValue))},showError:function(){this.$message({showClose:!0,message:"请输入内容",type:"error"})},isNull:function(t){if(""==t)return!0;var e="^[ ]+$",n=new RegExp(e);return n.test(t)},go:function(t){this.$router.go(t)},getSearchHot:function(){this.searchValue="",this.showHot=!0},toHot:function(t){this.searchValue=t,this.search()},deleteHistory:function(t,e){if(e)this.history=[];else for(var n=0;n<this.history.length;n++)n==t&&this.history.splice(n,1);event.preventDefault()},prevent:function(){event.preventDefault()}}}),u=r,l=(n("599a"),n("2877")),h=Object(l["a"])(u,a,c,!1,null,null,null),d=h.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("div",{staticClass:"index-left"},[n("ul",[n("li",[n("router-link",{attrs:{to:"/discover"}},[n("span",{staticClass:"iconfont2",staticStyle:{"font-size":"30px"}},[t._v("")]),n("span",{staticClass:"title"},[t._v(" 发现音乐")])])],1),n("li",[n("router-link",{attrs:{to:"/singer"}},[n("span",{staticClass:"iconfont2"},[t._v("")]),n("span",{staticClass:"title"},[t._v("发现歌手")])])],1),n("li",[n("router-link",{attrs:{to:"/recommend"}},[n("span",{staticClass:"iconfont2"},[t._v("")]),n("span",{staticClass:"title"},[t._v("  热门歌单")])])],1),n("li",[n("router-link",{attrs:{to:"/user"}},[n("span",{staticClass:"iconfont2"},[t._v("")]),n("span",{staticClass:"title"},[t._v("  我的音乐")])])],1)])]),n("main",[n("el-scrollbar",{staticStyle:{height:"100%"}},[t._t("default"),n("div",{staticStyle:{height:"70px",width:"100%"}})],2)],1)])},m=[],g={data:function(){return{}}},p=g,v=(n("024c"),Object(l["a"])(p,f,m,!1,null,null,null)),b=v.exports,y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"fold"},[s("img",{attrs:{src:n("83d9"),height:"30px",width:"30px"},on:{click:function(e){t.flag=!t.flag}}})]),s("transition",{attrs:{name:"el-zoom-in-bottom"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.flag,expression:"flag"}],staticClass:"bottom"},[s("div",{staticClass:"music-box"},[s("div",{staticClass:"img-wrap el-icon-arrow-up",attrs:{title:"打开音乐详情页",onselectstart:"return false"},on:{click:function(e){return t.toSongDetail()}}},[s("img",{attrs:{src:t.globalMusicInfo.imgUrl?t.$store.state.baseURL+t.globalMusicInfo.imgUrl:t.defaultImg,alt:""}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.globalMusicInfo.songName,expression:"globalMusicInfo.songName"}],staticClass:"music-info"},[s("span",{staticClass:"music-name",attrs:{title:t.globalMusicInfo.songName}},[t._v(t._s(t.globalMusicInfo.songName))]),s("div",{staticClass:"music-singer"},t._l(t.globalMusicInfo.artistInfo,(function(e,n){return s("span",{key:n+99},[t._v(t._s(e.name)+" ")])})),0)]),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.globalMusicInfo.songName,expression:"!globalMusicInfo.songName"}],staticClass:"music-name",staticStyle:{"line-height":"50px"}},[t._v("还没有播放音乐哦")])]),s("AudioChen",{attrs:{musicUrl:t.globalMusicUrl},on:{timeupdate:t.updateTime,play:t.playStatus,pause:t.pauseStatus,next:t.next,prev:t.prev,end:t.next}}),s("div",{ref:"queue",class:{"delete-queue-style bofangliebiao":"delete"==this.queueStyle,"add-queue-style bofangliebiao":"add"==this.queueStyle,bofangliebiao:"normal"==this.queueStyle},attrs:{title:"播放队列"},on:{click:function(e){return t.showQueue(e)}}},[s("span",{staticClass:"iconfont icon-yinleliebiao"}),s("span",[t._v(t._s(t.musicQueue.length))])])],1)])],1)},w=[],k=n("5530"),C=n("b85c"),$=(n("99af"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audio-wrap"},[n("audio",{ref:"audio",staticStyle:{display:"none"},attrs:{src:t.$store.state.baseURL+t.musicUrl,controls:"",autoplay:"","您的浏览器不支持audio标签":""},on:{canplay:t.getDuration,timeupdate:t.updateTime,ended:t.onEnded}}),n("div",{staticClass:"audio-left"},[n("div",{staticClass:"audio-btns"},[n("span",{staticClass:"iconfont icon-shangyishou",attrs:{title:"上一首"},on:{click:t.prev}}),t.isPaused?t._e():n("span",{staticClass:"iconfont icon-play",attrs:{title:"播放"},on:{click:function(e){return t.changeStatus("play")}}}),t.isPaused?n("span",{staticClass:"iconfont icon-pause",attrs:{title:"暂停"},on:{click:function(e){return t.changeStatus("pause")}}}):t._e(),n("span",{staticClass:"iconfont icon-xiayishou",attrs:{title:"下一首"},on:{click:t.next}})]),n("div",{staticClass:"audio-progress"},[n("span",[t._v(t._s(t._f("timeFormat")(t.currentTime)))]),n("div",{staticClass:"block"},[n("el-slider",{attrs:{max:t.duration,"show-tooltip":!1},on:{change:t.changeCurrentTime},nativeOn:{mousedown:function(e){t.isDrag=!0},mouseup:function(e){t.isDrag=!1}},model:{value:t.currentTime,callback:function(e){t.currentTime=e},expression:"currentTime"}})],1),n("span",[t._v(t._s(t._f("timeFormat")(t.duration)))])])]),n("div",{staticClass:"audio-right"},[n("div",{staticClass:"slot"}),n("div",{staticClass:"audio-voice"},[t.voice?n("span",{staticClass:"iconfont icon-yinliang",on:{click:function(e){t.voice=0}}}):t._e(),t.voice?t._e():n("span",{staticClass:"iconfont icon-jingyin",on:{click:function(e){t.voice=0==t.cacheVoice?.7:t.cacheVoice}}}),n("div",{staticClass:"block"},[n("el-slider",{attrs:{max:1,step:.1,"show-tooltip":!0,"format-tooltip":t.formatTooltip},on:{input:t.changeVolume,change:t.changeCacheVolume},model:{value:t.voice,callback:function(e){t.voice=e},expression:"voice"}})],1)])])])}),x=[],I=(n("4d90"),n("d3b7"),{data:function(){return{currentTime:0,duration:0,isPaused:!1,isDrag:!1,voice:.7,cacheVoice:.7}},props:{musicUrl:String},methods:{changeStatus:function(t){"play"==t?this.musicUrl?(this.isPaused=!this.isPaused,this.$refs.audio.play(),this.$emit("play")):this.$message({type:"error",message:"还没有播放音乐哦",showClose:!0}):(this.isPaused=!this.isPaused,this.$refs.audio.pause(),this.$emit("pause"))},changeCurrentTime:function(){this.$refs.audio.currentTime=this.currentTime,this.isDrag=!1},updateTime:function(t){this.isDrag||(this.currentTime=t.target.currentTime,this.$emit("timeupdate",event))},getDuration:function(t){this.duration=t.target.duration},changeVolume:function(){this.$refs.audio.volume=this.voice},changeCacheVolume:function(){this.cacheVoice=this.voice},formatTooltip:function(t){return 100*t+"%"},onEnded:function(){this.$emit("end")},next:function(){this.$emit("next")},prev:function(){this.$emit("prev")}},filters:{timeFormat:function(t){var e=parseInt(t/60).toString().padStart(2,"0"),n=parseInt(t-60*e).toString().padStart(2,"0");return e+":"+n}},watch:{voice:function(){this.voice?this.$refs.audio.muted=!1:this.$refs.audio.muted=!0},musicUrl:function(){this.musicUrl?this.isPaused=!0:(this.isPaused=!1,this.duration=0,this.$refs.audio.currentTime=0,this.currentTime=0)}}}),M=I,_=(n("2b33"),Object(l["a"])(M,$,x,!1,null,null,null)),S=_.exports,T={data:function(){return{defaultImg:n("ead1"),musicUrl:"",currentTime:0,flag:!0}},components:{AudioChen:S},props:{},computed:{globalMusicUrl:function(){return this.$store.state.globalMusicUrl},globalMusicInfo:function(){return this.$store.state.globalMusicInfo},musicQueue:function(){return this.$store.state.musicQueue},nowIndex:function(){return this.$store.state.nowIndex},queueStyle:function(){return this.$store.state.queueStyle}},mounted:function(){},methods:{changeQueuePostion:function(){if(this.$refs.queue.getBoundingClientRect){var t={top:Math.floor(this.$refs.queue.getBoundingClientRect().top),left:Math.floor(this.$refs.queue.getBoundingClientRect().left)};this.$store.commit("changeQueuePos",t)}},toSongDetail:function(){this.globalMusicUrl?this.$parent.show=!this.$parent.show:this.$message({showClose:!0,message:"还没有播放音乐哦",type:"error"})},updateTime:function(t){this.currentTime=t.target.currentTime,console.log("目前歌单index为："+this.nowIndex)},pauseStatus:function(){this.$store.commit("changeMusicStatus",!0)},playStatus:function(){this.$store.commit("changeMusicStatus",!1)},showQueue:function(t){this.$parent.showQueue=!this.$parent.showQueue,console.log("logo x:".concat(t.x,", y:").concat(t.y))},next:function(){var t=this;if(0==this.musicQueue.length)this.$message({type:"warning",message:"播放列表是空的~",showClose:!0});else if(1==this.musicQueue.length){this.currentTime=0;var e=this.globalMusicUrl;this.$store.commit("changeMusicUrl",""),setTimeout((function(){t.$store.commit("changeMusicUrl",e)}),0)}else{var n,s=[],i=Object(C["a"])(this.musicQueue);try{for(i.s();!(n=i.n()).done;){var o=n.value;s.push(o.id)}}catch(r){i.e(r)}finally{i.f()}var a=s.indexOf(this.globalMusicInfo.id),c=(a+1)%this.musicQueue.length;this.$store.commit("changeNowIndex",c),this.$store.commit("changeMusicStatus",!1)}},prev:function(){var t=this;if(0==this.musicQueue.length)this.$message({type:"warning",message:"播放列表是空的~",showClose:!0});else if(1==this.musicQueue.length){this.currentTime=0;var e=this.globalMusicUrl;this.$store.commit("changeMusicUrl",""),setTimeout((function(){t.$store.commit("changeMusicUrl",e)}),0)}else{var n,s=[],i=Object(C["a"])(this.musicQueue);try{for(i.s();!(n=i.n()).done;){var o=n.value;s.push(o.id)}}catch(r){i.e(r)}finally{i.f()}var a=s.indexOf(this.globalMusicInfo.id),c=(a-1)%this.musicQueue.length<0?(a-1)%this.musicQueue.length+this.musicQueue.length:(a-1)%this.musicQueue.length;this.$store.commit("changeNowIndex",c),this.$store.commit("changeMusicStatus",!1)}}},watch:{currentTime:function(){this.$store.commit("changeCurrentTime",this.currentTime)},globalMusicInfo:function(){var t=Object(k["a"])({musicUrl:this.globalMusicUrl},this.globalMusicInfo);this.$store.commit("changeMusicQueue",t)}}},Q=T,P=(n("35f6"),Object(l["a"])(Q,y,w,!1,null,null,null)),N=P.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{"leave-active-class":"closeWindow"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],ref:"bg",staticClass:"song-detail"},[n("i",{staticClass:"el-icon-arrow-down",on:{click:t.close}}),n("div",{staticClass:"content"},[n("div",{staticClass:"img-box"},[n("img",{class:{"player-bar isplay":!t.isMusicPaused,"player-bar":t.isMusicPaused},attrs:{src:t.playerBar,alt:""}}),n("div",{staticClass:"img-wrap-rotate"},[n("img",{ref:"cover",class:{running:!t.isMusicPaused,paused:t.isMusicPaused},attrs:{src:t.globalMusicInfo.imgUrl?t.$store.state.baseURL+t.globalMusicInfo.imgUrl:t.defaultImgUrl,alt:"",crossorigin:"anonymous"}})])]),n("div",{staticClass:"song-wrap"},[n("div",{staticStyle:{"padding-left":"20px"}},[n("h2",[t._v(t._s(t.globalMusicInfo.songName))]),n("div",{staticStyle:{margin:"5px 0 60px 0"}},[n("span",{staticClass:"song-info"},[t._v(t._s(t.globalMusicInfo.artistInfo)+" ")])])]),n("div",{staticClass:"lyric-wrap"},[t.hasLyric?n("el-scrollbar",{ref:"scroll",staticStyle:{height:"100%"}},t._l(t.lyric,(function(e,s){return n("p",{key:s,class:{"active-lyric":t.currentIndex===s}},[t._v(t._s(e.lyricWords))])})),0):t._e(),t.hasLyric?t._e():n("p",[t._v("抱歉，暂无歌词")])],1)])])])])},L=[],O=(n("1276"),n("fb6a"),n("5319"),n("07a2")),j=n("7c15"),q={data:function(){return{playerBar:n("00e6"),defaultImgUrl:n("ead1"),lyric:[],currentIndex:0,hasLyric:!0,colors:[]}},props:{show:Boolean},methods:{close:function(){this.$parent.show=!0},getColor:function(){var t=this,e=this.$refs.cover;e.addEventListener("load",(function(){var n=new O["a"];t.colors=n.getPalette(e,2),t.$refs.bg.style.background="linear-gradient(to right bottom, \n                                                rgb(".concat(t.colors[0][0],",").concat(t.colors[0][1],",").concat(t.colors[0][2],"), \n                                                rgb(").concat(t.colors[1][0],",").concat(t.colors[1][1],",").concat(t.colors[1][2],"))")}))},getLyric:function(t){var e=this;console.log("获取歌词"),Object(j["m"])(t).then((function(t){console.log(t);var n=e;if(e.$nextTick((function(){n.getColor()})),Object.hasOwnProperty.call(t.data.data,"lyric")){e.hasLyric=!0;var s,i=t.data.data.lyric,o=i.split("\n"),a=[],c=Object(C["a"])(o);try{for(c.s();!(s=c.n()).done;){var r=s.value,u=r.indexOf("]"),l=r.slice(1,u),h=e.timeFormat(l),d=r.replace(/\[.*?\]/g,"");d&&a.push({currentTime:h,lyricWords:d})}}catch(f){c.e(f)}finally{c.f()}e.lyric=a}else n.hasLyric=!1}))},timeFormat:function(t){var e=parseInt(t.split(":")[0]),n=Math.ceil(t.split(":")[1]),s=60*e+n;return s},lryicActive:function(t){for(var e=0;e<this.lyric.length;e++)if(this.lyric[e].currentTime==Math.ceil(t)){var n=document.querySelector(".active-lyric"),s=n.offsetTop;this.$refs["scroll"].wrap.scrollTop=s-3*n.offsetHeight,this.currentIndex=e}}},computed:{globalMusicInfo:function(){return this.$store.state.globalMusicInfo},globalCurrentTime:function(){return this.$store.state.globalCurrentTime},isMusicPaused:function(){return this.$store.state.isMusicPaused},globalMusicUrl:function(){return this.$store.state.globalMusicUrl}},watch:{globalCurrentTime:function(){this.hasLyric&&this.lryicActive(this.globalCurrentTime)},globalMusicUrl:function(){if(""!=this.globalMusicUrl){var t=this.$store.state.globalMusicInfo.id;this.getLyric(t)}}}},E=q,A=(n("d954"),Object(l["a"])(E,U,L,!1,null,null,null)),V=A.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"queue"},[n("div",{staticClass:"queue-tabs"},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"播放列表",name:"playList"}},[n("div",{staticClass:"queue-head"},[n("span",[t._v("共"+t._s(t.musicQueue.length)+"首")]),n("span",{staticClass:"clear",on:{click:t.clearMusicQueue}},[t._v("清空列表")])]),n("ul",{staticClass:"queue-wrap"},[n("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.musicQueue,(function(e){return n("li",{key:e.id,staticClass:"queue-song",class:{"active-song":e.id==t.globalMusicInfo.id},on:{dblclick:function(n){return t.play(e)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.id==t.globalMusicInfo.id&&!t.isMusicPaused,expression:"item.id==globalMusicInfo.id && !isMusicPaused"}],staticClass:"playingIcon"},[n("div",{staticClass:"playingIcon1"}),n("div",{staticClass:"playingIcon2"}),n("div",{staticClass:"playingIcon3"})]),n("span",{class:{"playingIcon iconfont icon-zanting":t.isMusicPaused&&e.id==t.globalMusicInfo.id}}),n("span",{staticClass:"queue-song-name"},[t._v(t._s(e.songName))]),n("div",{staticClass:"queue-song-singer"},t._l(e.artistInfo,(function(e,s){return n("span",{key:s,on:{click:function(n){return n.stopPropagation(),t.toArtist(e.id)}}},[t._v(t._s(e.name)+" ")])})),0),n("span",{staticClass:"queue-song-duration"},[t._v(t._s(e.artistInfo))]),n("span",{staticClass:"queue-song-delete",on:{click:function(n){return t.deleteQueue(e.id)}}},[t._v("×")])])})),0)],1)])],1),t.musicQueue.length?t._e():n("span",{staticClass:"queue-tip"},[t._v("什么都没有~快去听歌吧")])],1)])},B=[],H={data:function(){return{activeName:"playList"}},methods:{handleClick:function(t,e){console.log(t,e)},toArtist:function(t){this.$router.push("/artist?artistId=".concat(t))},deleteQueue:function(t){var e,n=this,s=[],i=Object(C["a"])(this.musicQueue);try{for(i.s();!(e=i.n()).done;){var o=e.value;s.push(o.id)}}catch(c){i.e(c)}finally{i.f()}var a=s.indexOf(t);setTimeout((function(){n.$store.commit("changeQueueStyle","delete"),n.$store.commit("deleteMusic",t),a<n.nowIndex?n.$store.commit("changeNowIndex",n.nowIndex-1):a==n.nowIndex&&n.$store.commit("deleteToNext")}),300),setTimeout((function(){n.$store.commit("changeQueueStyle","normal")}),1e3)},clearMusicQueue:function(){var t=this;0==this.musicQueue.length?this.$message({message:"已经是空的了~",type:"warning",showClose:!0}):this.$confirm("确定清空列表吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.commit("changeMusicUrl",""),t.$store.commit("changeMusicInfo",{}),t.$store.commit("changeMusicStatus",!0),t.$store.commit("changeCurrentTime",0),setTimeout((function(){t.$store.commit("clearMusicQueue")}),100),t.$message({type:"success",message:"已清空!"})})).catch((function(){t.$message({type:"info",message:"已取消清空"})}))},play:function(t){var e=this;console.log(t),Object(j["m"])(t.id).then((function(n){if(console.log("res"),console.log(n),n.data.data.url){var s=n.data.data.url,i={id:t.id,imgUrl:t.imgUrl,songName:t.songName,artistInfo:t.artistInfo,duration:t.duration};e.$store.commit("changeMusicUrl",s),e.$store.commit("changeMusicInfo",i),e.$store.commit("changeMusicStatus",!1);var o,a=[],c=Object(C["a"])(e.musicQueue);try{for(c.s();!(o=c.n()).done;){var r=o.value;a.push(r.id)}}catch(l){c.e(l)}finally{c.f()}e.$store.commit("changeNowIndex",a.indexOf(i.id))}else{e.$message({showClose:!0,message:"对不起，歌曲暂时无法播放。",type:"error"});var u=(e.nowIndex+1)%e.musicQueue.length;e.$store.commit("changeNowIndex",u)}}))}},computed:{musicQueue:function(){return this.$store.state.musicQueue},globalMusicInfo:function(){return this.$store.state.globalMusicInfo},isMusicPaused:function(){return this.$store.state.isMusicPaused},nowIndex:function(){return this.$store.state.nowIndex},deleteToNext:function(){return this.$store.state.deleteToNext}},watch:{nowIndex:function(){this.play(this.musicQueue[this.nowIndex])},deleteToNext:function(){var t=this;this.nowIndex<this.musicQueue.length&&this.play(this.musicQueue[this.nowIndex]),0==this.musicQueue.length&&(this.$store.commit("changeNowIndex",0),this.$store.commit("changeMusicUrl",""),this.$store.commit("changeMusicInfo",{}),this.$store.commit("changeMusicStatus",!0),this.$store.commit("changeCurrentTime",0),this.$parent.show=!0,setTimeout((function(){t.$store.commit("clearMusicQueue")}),100)),this.nowIndex==this.musicQueue.length&&this.$store.commit("changeNowIndex",0)}}},R=H,F=(n("8452"),Object(l["a"])(R,D,B,!1,null,null,null)),z=F.exports,W={name:"App",provide:function(){return{reload:this.reload}},components:{Top:d,Index:b,Bottom:N,SongDetail:V,Queue:z},data:function(){return{show:!0,showQueue:!1,isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},J=W,K=(n("034f"),Object(l["a"])(J,i,o,!1,null,null,null)),G=K.exports,X=n("5c96"),Y=n.n(X),Z=(n("0fae"),n("ed2c"),n("3ca3"),n("ddb0"),n("8c4f")),tt=n("4360");s["default"].use(Z["a"]);var et=Z["a"].prototype.push;Z["a"].prototype.push=function(t){return et.call(this,t).catch((function(t){return t}))};var nt=[{path:"/",redirect:"/discover"},{path:"/discover",component:function(){return n.e("chunk-1250cd8c").then(n.bind(null,"6d7f"))},meta:{keepAlive:!0}},{path:"/blank",component:function(){return n.e("chunk-2d0deb4c").then(n.bind(null,"8790"))}},{path:"/recommend",component:function(){return n.e("chunk-16b6ee77").then(n.bind(null,"a3cb"))},meta:{keepAlive:!0}},{path:"/result",component:function(){return n.e("chunk-4109210f").then(n.bind(null,"f4c8"))}},{path:"/playlist",component:function(){return Promise.all([n.e("chunk-24b14c40"),n.e("chunk-5e22a194")]).then(n.bind(null,"9972"))}},{path:"/myplaylist",component:function(){return Promise.all([n.e("chunk-24b14c40"),n.e("chunk-5f4c0582")]).then(n.bind(null,"ab5d"))},beforeEnter:function(t,e,n){var s=localStorage.getItem("isLogin");s?n():n("/login")}},{path:"/collection",component:function(){return Promise.all([n.e("chunk-24b14c40"),n.e("chunk-629e4e4b")]).then(n.bind(null,"32df"))},beforeEnter:function(t,e,n){var s=localStorage.getItem("isLogin");s?n():n("/login")}},{path:"/artist",component:function(){return Promise.all([n.e("chunk-24b14c40"),n.e("chunk-5e48472c")]).then(n.bind(null,"9949"))}},{name:"Login",path:"/login",component:function(){return n.e("chunk-682c54a2").then(n.bind(null,"7101"))},beforeEnter:function(t,e,n){var s=localStorage,i=s.isLogin;"true"==i?n("/user"):n()}},{path:"/register",component:function(){return n.e("chunk-4c69919c").then(n.bind(null,"7c9c"))},beforeEnter:function(t,e,n){var s=localStorage,i=s.isLogin;"true"==i?n("/user"):n()}},{path:"/singer",component:function(){return n.e("chunk-3942e987").then(n.bind(null,"e6ea"))}},{path:"/user",component:function(){return n.e("chunk-17f22a8b").then(n.bind(null,"c760"))},beforeEnter:function(t,e,n){var s=localStorage,i=s.isLogin;"true"===i?n():(Object(X["Message"])({type:"info",message:"请先登录"}),n({name:"Login"}))}}],st=new Z["a"]({routes:nt});st.beforeEach((function(t,e,n){var s=localStorage,i=s.isLogin,o=s.uid;console.log(o),"true"===i?Object(j["v"])(o).then((function(t){tt["a"].state.userImg=tt["a"].state.baseURL+t.data.data.img})):tt["a"].state.userImg="https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",n()}));var it=st,ot=n("caf9");n("fa85");s["default"].config.productionTip=!1,s["default"].use(Y.a),s["default"].use(ot["a"],{preLoad:1.3,loading:n("c9cf"),attempt:2}),new s["default"]({router:it,store:tt["a"],render:function(t){return t(G)}}).$mount("#app")},"594d":function(t,e,n){},"599a":function(t,e,n){"use strict";n("2fea")},"7c15":function(t,e,n){"use strict";n.d(e,"m",(function(){return l})),n.d(e,"c",(function(){return h})),n.d(e,"q",(function(){return d})),n.d(e,"p",(function(){return f})),n.d(e,"k",(function(){return m})),n.d(e,"g",(function(){return g})),n.d(e,"r",(function(){return p})),n.d(e,"o",(function(){return v})),n.d(e,"a",(function(){return b})),n.d(e,"f",(function(){return y})),n.d(e,"h",(function(){return w})),n.d(e,"l",(function(){return k})),n.d(e,"t",(function(){return C})),n.d(e,"n",(function(){return $})),n.d(e,"e",(function(){return x})),n.d(e,"s",(function(){return I})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return _})),n.d(e,"w",(function(){return S})),n.d(e,"b",(function(){return T})),n.d(e,"d",(function(){return Q})),n.d(e,"j",(function(){return P})),n.d(e,"i",(function(){return N}));var s=n("5530"),i=(n("99af"),n("d3b7"),n("bc3a")),o=n.n(i),a=n("4360"),c="";c="http://localhost:9999",a["a"].state.baseURL=c;var r=o.a.create({baseURL:c,timeout:5e3,headers:{platform:"client"}});r.interceptors.response.use((function(t){return 200==t.status?Promise.resolve(t):Promise.reject(t)}));var u=r;function l(t){return u({url:"/song/".concat(t),method:"get"})}function h(){return u({url:"/banner/",method:"get"})}function d(t){return u({url:"/sheet/".concat(t),method:"get"})}function f(){return u({url:"/song/",method:"get"})}function m(t){return u({url:"/auth/login",method:"post",params:t})}function g(t){return u({url:"/client/".concat(t),method:"delete",headers:{token:localStorage.getItem("token")}})}function p(t){return u({url:"/client/register",method:"post",params:t})}function v(t){return u({url:"/sheetComment/",method:"post",headers:{token:localStorage.getItem("token")},params:t})}function b(t){return u({url:"/myListContain/",method:"post",headers:{token:localStorage.getItem("token")},params:t})}function y(t,e){return u({url:"/mySheet/".concat(t),method:"post",headers:{token:localStorage.getItem("token")},params:Object(s["a"])({},e)})}function w(t){return u({url:"/myListContain/".concat(t.cid,"/").concat(t.sid,"/1"),method:"delete",headers:{token:localStorage.getItem("token")}})}function k(t){return u({url:"/myListContain/".concat(t,"/1"),method:"get",headers:{token:localStorage.getItem("token")}})}function C(t){return u({url:"/singer/".concat(t),method:"get"})}function $(t){return u({url:"/sheetContain/pre/".concat(t),method:"get"})}function x(t){return u({url:"/sheetComment/".concat(t),method:"get"})}function I(t,e){return u({url:"/".concat(t,"/search/").concat(e),method:"get"})}function M(t){return u({url:"/song/withSinger/".concat(t),method:"get"})}function _(t){return u({url:"/client/".concat(t),method:"get",headers:{token:localStorage.getItem("token")}})}function S(t){return u({url:"/mySheet/".concat(t),method:"get",headers:{token:localStorage.getItem("token")}})}function T(t){return u({url:"/sheetContain/".concat(t.id,"/").concat(t.singerName,"/").concat(t.songName),method:"post",headers:{token:localStorage.getItem("token")}})}function Q(t){return u({url:"/client/",method:"put",headers:{token:localStorage.getItem("token")},params:t})}function P(t){return u({url:"/sheet/".concat(t),method:"delete",headers:{token:localStorage.getItem("token")}})}function N(t){return u({url:"/sheetContain/".concat(t.sheetId,"/").concat(t.songId),method:"delete",headers:{token:localStorage.getItem("token")}})}},"7f5c":function(t,e,n){},"83d9":function(t,e,n){t.exports=n.p+"img/down.789de735.png"},8452:function(t,e,n){"use strict";n("594d")},"85ec":function(t,e,n){},a2f0:function(t,e,n){},c9cf:function(t,e,n){t.exports=n.p+"img/loading.7c4c5530.png"},cdd6:function(t,e,n){},d954:function(t,e,n){"use strict";n("a2f0")},ead1:function(t,e,n){t.exports=n.p+"img/defaultImg.2bcc6c21.png"},ed2c:function(t,e,n){},fa85:function(t,e,n){}});
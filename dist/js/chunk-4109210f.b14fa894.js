(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4109210f"],{"9cca":function(t,e,s){"use strict";s("bbf7")},bbf7:function(t,e,s){},f4c8:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"result"},[s("div",{staticClass:"result-top-info"},[s("h2",[t._v(t._s(t.keywords))]),s("span",[t._v("共找到"+t._s(t.total)+"个结果")])]),s("div",{staticClass:"tab-wrap"},[s("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"歌曲",name:"first"}},[s("div",{staticClass:"songs-table"},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:t.songsList,stripe:""},on:{"row-dblclick":t.play}},[s("el-table-column",{attrs:{type:"index",width:"50"}}),s("el-table-column",{attrs:{prop:"songName",label:"歌曲",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",[t._v(t._s(e.row.songName))])]}}])}),s("el-table-column",{attrs:{prop:"artistInfo",label:"歌手",width:""},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"plus",staticStyle:{top:"15px"},attrs:{title:"收藏歌曲"},on:{click:function(s){return t.addToCollection(e.row,s)}}},[t._v("+")]),s("span",{staticStyle:{cursor:"pointer",color:"#2980b9",display:"inline-block"},on:{click:function(s){return t.toArtist(e.row.artistid)}}},[t._v(t._s(e.row.artistInfo))])]}}])}),s("el-table-column",{attrs:{width:"",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticStyle:{top:"20px</ul>"},attrs:{title:"添加到歌单"}},[s("el-popover",{attrs:{placement:"right",width:"100",trigger:"click"}},[t._l(t.getData,(function(a,i){return s("p",{key:i,on:{click:function(s){return t.addToMyList(e.row,i)}}},[t._v(t._s(a.title))])})),s("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("添加到歌单")])],2)],1)]}}])})],1)],1)]),s("el-tab-pane",{attrs:{label:"歌单",name:"second"}},[s("div",{staticClass:"songs-wrap"},[s("div",{staticClass:"list"},[s("ul",t._l(t.playList,(function(e,a){return s("li",{key:a,staticClass:"iconfont icon-play",on:{click:function(s){return t.toPlaylistDetail(e.id)}}},[s("p",{staticClass:"first-p"}),s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.img,expression:"item.img"}],attrs:{alt:"recommend"}}),s("p",{staticClass:"last-p",attrs:{title:e.title}},[t._v(t._s(e.title))])])})),0)])])])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showAddBall,expression:"showAddBall"}],ref:"addBall",staticClass:"add-ball iconfont icon-yinfu"})])},i=[],o=s("b85c"),n=s("7c15"),l={data:function(){return{keywords:"",activeName:"first",songsList:[],playList:[],mvList:[],page:1,total:0,pageSize:10,type:1,loading:!0,showAddBall:!1,musicURL:"",getData:[]}},components:{},computed:{musicQueue:function(){return this.$store.state.musicQueue},queuePos:function(){return this.$store.state.queuePos}},methods:{addToMyList:function(t,e){var s=this;console.log(t);var a={id:this.getData[e].id,singerName:t.artistInfo,songName:t.songName};console.log(e),Object(n["b"])(a).then((function(){s.$message({showClose:!0,message:"添加成功",type:"success"})}))},addToCollection:function(t){var e=this;if("true"==localStorage.isLogin){var s={clientId:localStorage.uid,songId:t.id,type:1};Object(n["a"])(s),this.$message({showClose:!0,message:"收藏成功",type:"success"})}else this.$confirm("收藏歌曲需要登录, 是否前往登录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/login")})).catch((function(){e.$message({type:"info",message:"已取消"})}))},toPlaylistDetail:function(t){this.$router.push("/playlist?id=".concat(t))},toArtist:function(t){this.$router.push("/artist?artistId=".concat(t))},handleCurrentChange:function(t){this.page=t,this.getTableData(this.type)},handleClick:function(t){var e=t.label;switch(e){case"歌曲":this.total=0,this.page=1,this.type=1,this.pageSize=10,this.getTableData();break;case"歌单":this.total=0,this.page=1,this.type=1e3,this.pageSize=10,this.getTableData(this.type);break}},play:function(t){console.log("row"),console.log(t);var e=t.pid;this.songUrl=this.songsList[e].url;var s={imgUrl:t.imgUrl,artistInfo:t.artistInfo,songName:t.songName,id:t.id};this.$store.commit("changeMusicUrl",this.songUrl),this.$store.commit("changeMusicInfo",s),this.$store.commit("changeMusicStatus",!1),this.$store.commit("changeMusicQueue",s);var a,i=[],n=Object(o["a"])(this.musicQueue);try{for(n.s();!(a=n.n()).done;){var l=a.value;i.push(l.id)}}catch(c){n.e(c)}finally{n.f()}this.$store.commit("changeNowIndex",i.indexOf(s.id))},getTableData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.loading=!0;var s="";s=1===e?"song":"sheet",Object(n["s"])(s,this.keywords).then((function(s){console.log(s);var a=[];switch(e){case 1:a=s.data.data,console.log(a),0==t.total&&(t.total=s.data.data.length);var i=[];for(var n in a){var l={id:a[n].song.id,songName:a[n].song.songName,artistInfo:a[n].singer.singerName,imgUrl:a[n].song.img,artistid:a[n].singer.id,url:a[n].song.url,pid:n};i.push(l)}t.songsList=i;break;case 1e3:a=s.data.data,0==t.total&&(t.total=s.data.data.length),t.playList=a;var c,r=Object(o["a"])(t.playList);try{for(r.s();!(c=r.n()).done;){var u=c.value;u.img=t.$store.state.baseURL+u.img}}catch(d){r.e(d)}finally{r.f()}console.log(t.playList);break}})).then((function(){t.loading=!1})),Object(n["w"])(localStorage.uid).then((function(e){t.getData=e.data.data.sheetList}))},beginAnimation:function(t,e){var s=this;this.showAddBall=!0;var a=this.queuePos.left,i=this.queuePos.top;console.log("起始位置 x:"+t+" y:"+e),console.log("终点位置 x:"+a+" y:"+i);var o=document.querySelector(".add-ball");o.style.left=t+"px",o.style.top=e+"px",setTimeout((function(){o.style.left=a+"px",o.style.top=i+"px"}),0),setTimeout((function(){s.showAddBall=!1}),500)}},created:function(){this.keywords=this.$route.query.keywords,this.getTableData()},watch:{$route:function(t){this.keywords=t.query.keywords,this.total=0,this.page=1,this.getTableData(this.type)}}},c=l,r=(s("9cca"),s("2877")),u=Object(r["a"])(c,a,i,!1,null,null,null);e["default"]=u.exports}}]);